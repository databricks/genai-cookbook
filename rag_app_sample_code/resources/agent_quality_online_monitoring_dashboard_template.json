{"datasets":[{"name":"b3e86a40","displayName":"{{eval_requests_log_table_name}}","query":"select \n    *,\n    execution_time_ms / 1000 as execution_time_s,\n    concat(\n        '/ml/experiments/',\n        experiment_id,\n        '/runs/',\n        run_id,\n        '/evaluations?searchQuery=',\n        databricks_request_id\n     ) as eval_details\nfrom {{eval_requests_log_table_name}}\nwhere \n    run_id is not NULL \n    and run_id != \"skipped\""}],"pages":[{"name":"ddfbf277","displayName":"New Page","layout":[{"widget":{"name":"913aa033","textbox_spec":"\n# Monitoring dashboard for {{inference_table_name}}\n"},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"60079d49","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"avg(execution_time_s)","expression":"AVG(`execution_time_s`)"},{"name":"percentile(execution_time_s, percentage=0_9)","expression":"PERCENTILE(`execution_time_s`, 0.9)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"daily(timestamp)","scale":{"type":"temporal"},"axis":{"title":"Timestamp"},"displayName":"Timestamp"},"y":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"avg(execution_time_s)","displayName":"Average execution_time_s"},{"fieldName":"percentile(execution_time_s, percentage=0_9)","displayName":"90th Percentile of execution_time_s"}]}},"frame":{"title":"Average response time (in seconds)","showTitle":true},"mark":{"colors":["#077A9D","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":11,"width":3,"height":5}},{"widget":{"name":"6e871c03","textbox_spec":"## Requests"},"position":{"x":0,"y":30,"width":6,"height":2}},{"widget":{"name":"e3ae086d","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"response/llm_judged/safety/rating","expression":"`response/llm_judged/safety/rating`"},{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(timestamp)","scale":{"type":"temporal"},"axis":{"title":"Timestamp"},"displayName":"Timestamp"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Count of Records"},"color":{"fieldName":"response/llm_judged/safety/rating","scale":{"type":"categorical","mappings":[{"value":null,"color":"#077A9D"},{"value":"no","color":"#FFAB00"},{"value":"yes","color":"#00A972"}]},"legend":{"hideTitle":true},"displayName":"response/llm_judged/safety/rating"}},"frame":{"showTitle":true,"title":"Breakdown of safety","showDescription":true,"description":"A response is safe (yes) if it does not include harmful content."},"mark":{"layout":"stack"}}},"position":{"x":0,"y":18,"width":3,"height":6}},{"widget":{"name":"9bfae3ca","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"response/llm_judged/groundedness/rating","expression":"`response/llm_judged/groundedness/rating`"},{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(timestamp)","scale":{"type":"temporal"},"axis":{"title":"Timestamp"},"displayName":"Timestamp"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Count of Records"},"color":{"fieldName":"response/llm_judged/groundedness/rating","scale":{"type":"categorical","mappings":[{"value":null,"color":"#077A9D"},{"value":"no","color":"#FFAB00"},{"value":"yes","color":"#00A972"}]},"legend":{"hideTitle":true},"displayName":"response/llm_judged/groundedness/rating"}},"frame":{"showTitle":true,"title":"Breakdown of groundedness ","showDescription":true,"description":"A response is grounded (yes) when its content is derived entirely from the retrieved context. Otherwise (no) it contains hallucinations."},"mark":{"layout":"stack"}}},"position":{"x":0,"y":24,"width":3,"height":6}},{"widget":{"name":"91a7b3ba","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"response/llm_judged/relevance_to_query/rating","expression":"`response/llm_judged/relevance_to_query/rating`"},{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(timestamp)","scale":{"type":"temporal"},"axis":{"title":"Timestamp"},"displayName":"Timestamp"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Count of Records"},"color":{"fieldName":"response/llm_judged/relevance_to_query/rating","scale":{"type":"categorical","mappings":[{"value":"no","color":"#FFAB00"},{"value":"yes","color":"#00A972"},{"value":null,"color":"#077A9D"}]},"legend":{"hide":false,"hideTitle":true},"displayName":"response/llm_judged/relevance_to_query/rating"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Breakdown of response relevance ","showDescription":true,"description":"A relevant response (yes) is useful in answering the input request."},"mark":{"layout":"stack"}}},"position":{"x":3,"y":18,"width":3,"height":6}},{"widget":{"name":"f0fd68a2","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"status_code","expression":"`status_code`"},{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(timestamp)","scale":{"type":"temporal"},"axis":{"title":"Timestamp"},"displayName":"Timestamp"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Count of Records"},"color":{"fieldName":"status_code","scale":{"type":"categorical","mappings":[{"value":200,"color":"#077A9D"}]},"displayName":"status_code"}},"frame":{"title":"Number of requests","showTitle":true}}},"position":{"x":0,"y":6,"width":3,"height":5}},{"widget":{"name":"74f7e09b","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"avg(retrieval/llm_judged/chunk_relevance/precision)","expression":"AVG(`retrieval/llm_judged/chunk_relevance/precision`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(timestamp)","scale":{"type":"temporal"},"axis":{"title":"Timestamp"},"displayName":"Timestamp"},"y":{"fieldName":"avg(retrieval/llm_judged/chunk_relevance/precision)","scale":{"type":"quantitative"},"displayName":"Average retrieval/llm_judged/chunk_relevance/precision"}},"frame":{"title":"Average judged precision","showTitle":true,"showDescription":true,"description":"Judged precision is the percentage of retrieved chunks that are relevant to the request."},"mark":{"colors":["#077A9D","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":3,"y":24,"width":3,"height":6}},{"widget":{"name":"f3cd0aff","textbox_spec":"\n## Top-level metrics\nThe following charts give a quick overview of incoming traffic, the pass/fail rate of output quality, the average execution time for the agent, and topic distribution. **Click on a bar to filter all charts in the dashboard.**"},"position":{"x":0,"y":2,"width":6,"height":2}},{"widget":{"name":"d16360c0","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"request","expression":"`request`"},{"name":"response","expression":"`response`"},{"name":"eval_details","expression":"`eval_details`"},{"name":"run_id","expression":"`run_id`"},{"name":"databricks_request_id","expression":"`databricks_request_id`"},{"name":"timestamp","expression":"`timestamp`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"request","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":9,"title":"request","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"request"},{"fieldName":"response","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":10,"title":"response","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"response"},{"fieldName":"eval_details","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"See metrics in mlflow UI","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"link","visible":true,"order":11,"title":"eval_details","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[]},"displayName":"eval_details"},{"fieldName":"run_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":12,"title":"run_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"run_id"},{"fieldName":"databricks_request_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":13,"title":"databricks_request_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"databricks_request_id"},{"fieldName":"timestamp","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":14,"title":"timestamp","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"timestamp"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"client_request_id","type":"string","displayAs":"string","order":0,"title":"client_request_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"dateTimeFormat":"YYYY-MM-DD","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"date","type":"date","displayAs":"datetime","order":1,"title":"date","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"timestamp_ms","type":"integer","displayAs":"number","order":2,"title":"timestamp_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"status_code","type":"integer","displayAs":"number","order":3,"title":"status_code","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"execution_time_ms","type":"integer","displayAs":"number","order":4,"title":"execution_time_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"request_raw","type":"string","displayAs":"string","order":5,"title":"request_raw","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response_raw","type":"string","displayAs":"string","order":6,"title":"response_raw","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"sampling_fraction","type":"float","displayAs":"number","order":7,"title":"sampling_fraction","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"request_metadata","type":"complex","displayAs":"json","order":8,"title":"request_metadata","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"trace","type":"string","displayAs":"string","order":15,"title":"trace","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"conversation_id","type":"string","displayAs":"string","order":16,"title":"conversation_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"schema_version","type":"string","displayAs":"string","order":17,"title":"schema_version","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"expected_retrieved_context","type":"float","displayAs":"number","order":18,"title":"expected_retrieved_context","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"expected_response","type":"float","displayAs":"number","order":19,"title":"expected_response","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"retrieved_context","type":"complex","displayAs":"json","order":20,"title":"retrieved_context","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"grading_notes","type":"float","displayAs":"number","order":21,"title":"grading_notes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response/llm_judged/groundedness/rating","type":"string","displayAs":"string","order":22,"title":"response/llm_judged/groundedness/rating","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response/llm_judged/groundedness/rationale","type":"string","displayAs":"string","order":23,"title":"response/llm_judged/groundedness/rationale","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response/llm_judged/safety/rating","type":"string","displayAs":"string","order":24,"title":"response/llm_judged/safety/rating","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response/llm_judged/safety/rationale","type":"string","displayAs":"string","order":25,"title":"response/llm_judged/safety/rationale","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response/llm_judged/relevance_to_query/rating","type":"string","displayAs":"string","order":26,"title":"response/llm_judged/relevance_to_query/rating","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response/llm_judged/relevance_to_query/rationale","type":"string","displayAs":"string","order":27,"title":"response/llm_judged/relevance_to_query/rationale","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"retrieval/llm_judged/chunk_relevance/ratings","type":"complex","displayAs":"json","order":28,"title":"retrieval/llm_judged/chunk_relevance/ratings","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"retrieval/llm_judged/chunk_relevance/rationales","type":"complex","displayAs":"json","order":29,"title":"retrieval/llm_judged/chunk_relevance/rationales","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"agent/latency_seconds","type":"float","displayAs":"number","order":30,"title":"agent/latency_seconds","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"retrieval/llm_judged/chunk_relevance/error_messages","type":"complex","displayAs":"json","order":31,"title":"retrieval/llm_judged/chunk_relevance/error_messages","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"retrieval/llm_judged/chunk_relevance/precision","type":"float","displayAs":"number","order":32,"title":"retrieval/llm_judged/chunk_relevance/precision","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"thumbs_up","type":"integer","displayAs":"number","order":33,"title":"thumbs_up","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"thumbs_down","type":"integer","displayAs":"number","order":34,"title":"thumbs_down","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response/overall_assessment/rating","type":"string","displayAs":"string","order":35,"title":"response/overall_assessment/rating","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"agent/total_input_token_count","type":"float","displayAs":"number","order":36,"title":"agent/total_input_token_count","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"agent/total_output_token_count","type":"float","displayAs":"number","order":37,"title":"agent/total_output_token_count","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"execution_time_s","type":"float","displayAs":"number","order":38,"title":"execution_time_s","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"agent/total_token_count","type":"float","displayAs":"number","order":39,"title":"agent/total_token_count","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response/llm_judged/relevance_to_query/error_message","type":"string","displayAs":"string","order":40,"title":"response/llm_judged/relevance_to_query/error_message","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"experiment_id","type":"string","displayAs":"string","order":41,"title":"experiment_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"topic","type":"string","displayAs":"string","order":42,"title":"topic","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false}},"position":{"x":0,"y":32,"width":6,"height":6}},{"widget":{"name":"8d172bd8","textbox_spec":"\n## Detailed quality checks from Agent Evaluation\n\nThis section shows the results of running the Agent Evaluation judges on the incoming requests and responses. Note that a _null_ rating means the judge errored out."},"position":{"x":0,"y":16,"width":6,"height":2}},{"widget":{"name":"9eed5525","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"response/overall_assessment/rating","expression":"`response/overall_assessment/rating`"},{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(timestamp)","scale":{"type":"temporal"},"displayName":"Timestamp"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Count of Records"},"color":{"fieldName":"response/overall_assessment/rating","scale":{"type":"categorical","mappings":[{"value":null,"color":"#077A9D"},{"value":"no","color":"#FFAB00"},{"value":"yes","color":"#00A972"}]},"legend":{"hideTitle":true},"displayName":"response/overall_assessment/rating"}},"frame":{"title":"Pass rate for judged quality of responses","showTitle":true},"mark":{"layout":"percent-stack"}}},"position":{"x":3,"y":6,"width":3,"height":5}},{"widget":{"name":"cf0fc2a5","queries":[{"name":"dashboards/01ef79fd14cb10d68096184e643a9bf2/datasets/01ef79fd14ce1b8e9dd7cefbbac6c1f7_daily(timestamp)","query":{"datasetName":"b3e86a40","fields":[{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"daily(timestamp)_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"fieldName":"daily(timestamp)","displayName":"timestamp","queryName":"dashboards/01ef79fd14cb10d68096184e643a9bf2/datasets/01ef79fd14ce1b8e9dd7cefbbac6c1f7_daily(timestamp)"}]},"selection":{"defaultSelection":{"range":{"dataType":"DATE","min":{"value":"2024-09-17T00:00:00.000"},"max":{"value":"2024-09-25T23:59:59.999"}}}},"frame":{"showTitle":true,"showDescription":false,"title":"Select date range"}}},"position":{"x":0,"y":4,"width":2,"height":2}},{"widget":{"name":"96a6c425","queries":[{"name":"main_query","query":{"datasetName":"b3e86a40","fields":[{"name":"topic","expression":"`topic`"},{"name":"daily(timestamp)","expression":"DATE_TRUNC(\"DAY\", `timestamp`)"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(timestamp)","scale":{"type":"temporal"},"displayName":"Timestamp"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"Count of Records"},"color":{"fieldName":"topic","scale":{"type":"categorical","mappings":[{"value":null,"color":"#077A9D"},{"value":"no","color":"#FFAB00"},{"value":"yes","color":"#00A972"}]},"legend":{"hideTitle":true},"displayName":"topic"}},"frame":{"title":"Topic distribution","showTitle":true},"mark":{"layout":"stack"}}},"position":{"x":3,"y":11,"width":3,"height":5}},{"widget":{"name":"be837aaa","queries":[{"name":"dashboards/01ef79fd14cb10d68096184e643a9bf2/datasets/01ef79fd14ce1b8e9dd7cefbbac6c1f7_topic","query":{"datasetName":"b3e86a40","fields":[{"name":"topic","expression":"`topic`"},{"name":"topic_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"topic","displayName":"topic","queryName":"dashboards/01ef79fd14cb10d68096184e643a9bf2/datasets/01ef79fd14ce1b8e9dd7cefbbac6c1f7_topic"}]},"frame":{"showTitle":true,"title":"Select Topic"}}},"position":{"x":2,"y":4,"width":1,"height":2}},{"widget":{"name":"49eeddb4","textbox_spec":"##### Mosaic Agent Framework & Evaluation can also help you track actual user feedback over your agent (e.g., thumbs up/down). Reach out to your Databricks representative if you are interested in enabling this feature.\n"},"position":{"x":3,"y":4,"width":3,"height":2}}]}]}